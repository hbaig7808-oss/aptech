<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOYO Toys - Interactive Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS Variables & General Styles --- */
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4ECDC4;
            --accent-color: #FFE66D;
            --dark-color: #2C3E50;
            --light-color: #F7F7F7;
            --text-color: #333;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-color);
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        section {
            padding: 80px 0;
        }

        /* --- Header & Navigation --- */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo i {
            margin-right: 10px;
            font-size: 30px;
        }

        nav ul {
            display: flex;
            list-style: none;
            align-items: center;
        }

        nav ul li {
            margin-left: 25px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            position: relative;
            padding: 5px 0;
            transition: color 0.3s ease;
        }

        nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }

        nav ul li a:hover::after,
        nav ul li a.active::after {
            width: 100%;
        }

        nav ul li a:hover,
        nav ul li a.active {
            color: var(--primary-color);
        }

        /* --- Cart Icon --- */
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--dark-color);
            transition: color 0.3s ease;
        }
        .cart-icon:hover {
            color: var(--primary-color);
        }
        .cart-count {
            position: absolute;
            top: -8px;
            right: -12px;
            background-color: var(--accent-color);
            color: var(--dark-color);
            font-size: 0.7rem;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        /* --- Hero Section --- */
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://picsum.photos/seed/toys/1200/600.jpg') center/cover;
            opacity: 0.2;
            z-index: -1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            animation: fadeInDown 1s ease;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            animation: fadeInUp 1s ease 0.3s both;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-color);
            color: var(--dark-color);
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            animation: fadeInUp 1s ease 0.6s both;
        }

        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            background-color: white;
        }

        /* --- Section Titles --- */
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--dark-color);
            display: inline-block;
            position: relative;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }

        /* --- Product Grid --- */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .product-card.hidden {
            display: none;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .product-card .badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--accent-color);
            color: var(--dark-color);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 1;
        }

        .product-image {
            height: 200px;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.1);
        }

        .product-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-info h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }

        .product-info p {
            margin-bottom: 15px;
            color: #666;
            flex-grow: 1;
        }

        .product-price {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #FF5252;
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* --- Categories Section --- */
        .categories {
            background-color: white;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .category-card {
            background-color: var(--light-color);
            border-radius: 10px;
            padding: 30px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .category-card:hover, .category-card.active {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-5px);
            border-color: var(--dark-color);
        }

        .category-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .category-card:hover i, .category-card.active i {
            color: white;
        }

        /* --- Newsletter Section --- */
        .newsletter {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            text-align: center;
        }

        .newsletter h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .newsletter p {
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .newsletter-form {
            display: flex;
            max-width: 500px;
            margin: 0 auto;
        }

        .newsletter-form input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 30px 0 0 30px;
            font-size: 1rem;
        }

        .newsletter-form button {
            padding: 15px 25px;
            background-color: var(--accent-color);
            color: var(--dark-color);
            border: none;
            border-radius: 0 30px 30px 0;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .newsletter-form button:hover {
            background-color: white;
        }

        /* --- Footer --- */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #bbb;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-column ul li a:hover {
            color: var(--primary-color);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 0.9rem;
        }
        
        /* --- About & Contact Sections --- */
        .about-content, .contact-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        .contact-content .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .contact-content .info-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .contact-content .info-item i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        /* --- Modals (Product Details & Cart) --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            overflow: auto;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 700px;
            position: relative;
            animation: slideIn 0.4s ease;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }
        .modal-close:hover {
            color: var(--dark-color);
        }

        .modal-body {
            display: flex;
            gap: 30px;
        }
        .modal-body img {
            max-width: 300px;
            border-radius: 8px;
        }
        .modal-details h2 {
            color: var(--dark-color);
            margin-bottom: 10px;
        }
        .modal-details .price {
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 15px;
        }
        .modal-details p {
            margin-bottom: 20px;
        }
        
        /* --- Cart Modal --- */
        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-name {
            font-weight: bold;
        }
        .cart-item-price {
            color: var(--primary-color);
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .cart-item-quantity button {
            background: var(--light-color);
            border: 1px solid #ccc;
            width: 25px;
            height: 25px;
            cursor: pointer;
            border-radius: 3px;
        }
        .cart-total {
            text-align: right;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 20px;
        }
        .cart-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .cart-empty-message {
            text-align: center;
            padding: 40px;
            color: #888;
        }

        /* --- Toast Notification --- */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--dark-color);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: var(--shadow-hover);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 3000;
        }
        .toast.show {
            transform: translateX(0);
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .header-container { flex-direction: column; }
            nav ul { margin-top: 15px; }
            nav ul li { margin: 0 10px; }
            .hero { padding: 70px 0; }
            .hero h1 { font-size: 2.2rem; }
            .newsletter-form { flex-direction: column; }
            .newsletter-form input, .newsletter-form button { width: 100%; border-radius: 30px; }
            .newsletter-form button { margin-top: 10px; }
            .modal-body { flex-direction: column; }
            .modal-body img { max-width: 100%; }
        }
        @media (max-width: 576px) {
            .hero h1 { font-size: 1.8rem; }
            .section-title h2 { font-size: 1.8rem; }
            .product-grid { grid-template-columns: 1fr; }
            .category-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#home" class="logo"><i class="fas fa-horse"></i> TOYO Toys</a>
            <nav>
                <ul>
                    <li><a href="#home" class="nav-link active">Home</a></li>
                    <li><a href="#products" class="nav-link">Products</a></li>
                    <li><a href="#categories" class="nav-link">Categories</a></li>
                    <li><a href="#about" class="nav-link">About Us</a></li>
                    <li><a href="#contact" class="nav-link">Contact</a></li>
                    <li><div class="cart-icon" id="cart-icon"><i class="fas fa-shopping-cart"></i><span class="cart-count" id="cart-count">0</span></div></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="container">
                <h1>Welcome to TOYO Toys!</h1>
                <p>Discover a world of imagination and fun with our amazing collection of toys for kids of all ages.</p>
                <a href="#products" class="cta-button">Shop Now</a>
            </div>
        </section>

        <!-- Featured Products Section -->
        <section id="products" class="featured-products">
            <div class="container">
                <div class="section-title">
                    <h2>Featured Products</h2>
                </div>
                <div class="product-grid" id="product-grid">
                    <!-- Products will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section id="categories" class="categories">
            <div class="container">
                <div class="section-title">
                    <h2>Shop by Category</h2>
                </div>
                <div class="category-grid" id="category-grid">
                    <!-- Categories will be dynamically inserted here -->
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="about">
            <div class="container">
                <div class="section-title"><h2>About TOYO Toys</h2></div>
                <div class="about-content">
                    <p>At TOYO Toys, we believe in the power of play. For over 20 years, we've been dedicated to creating high-quality, safe, and innovative toys that inspire creativity, learning, and endless fun. Our carefully curated collection ranges from classic wooden toys to the latest in STEM-focused robotics, ensuring there's something perfect for every child.</p>
                    <p>Our mission is to be more than just a toy store; we want to be a partner in your child's development. We work with educators and child development experts to design toys that are not only fun but also foster critical thinking, motor skills, and social interaction.</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact">
            <div class="container">
                <div class="section-title"><h2>Contact Us</h2></div>
                <div class="contact-content">
                    <p>We'd love to hear from you! Whether you have a question about a product, an order, or just want to say hello, our team is ready to help.</p>
                    <div class="info-grid">
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4>Our Store</h4>
                                <p>123 Fun Street, Playville, Toyland, 12345</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-phone"></i>
                            <div>
                                <h4>Phone</h4>
                                <p>+1 (123) 456-7890</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email</h4>
                                <p><a href="mailto:support@toys.com">support@toys.com</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter Section -->
        <section class="newsletter">
            <div class="container">
                <h2>Subscribe to Our Newsletter</h2>
                <p>Get the latest updates on new products and exclusive offers.</p>
                <form class="newsletter-form" id="newsletter-form">
                    <input type="email" placeholder="Enter your email address" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>About TOYO Toys</h3>
                    <p>We are dedicated to providing high-quality, safe, and fun toys that inspire creativity and learning in children of all ages.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#products">Products</a></li>
                        <li><a href="#categories">Categories</a></li>
                        <li><a href="#about">About Us</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#contact">Contact Us</a></li>
                        <li><a href="#">Shipping Information</a></li>
                        <li><a href="#">Returns & Exchanges</a></li>
                        <li><a href="#">FAQs</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TOYO Toys. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Product Details Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-body">
                <img id="modal-image" src="" alt="">
                <div class="modal-details">
                    <h2 id="modal-title"></h2>
                    <div class="price" id="modal-price"></div>
                    <p id="modal-description"></p>
                    <button class="btn btn-primary" id="modal-add-to-cart">Add to Cart</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Your Shopping Cart</h2>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be dynamically inserted here -->
            </div>
            <div class="cart-total" id="cart-total">Total: $0.00</div>
            <div class="cart-actions">
                <button class="btn btn-outline" id="clear-cart">Clear Cart</button>
                <button class="btn btn-primary">Checkout</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DATA ---
            const products = [
                { id: 1, name: 'Racing Car Set', category: 'vehicles', price: 24.99, image: 'https://picsum.photos/seed/toy1/400/300.jpg', description: 'High-speed racing cars with track accessories for endless fun. Perfect for kids who love action and competition.' },
                
                { id: 2, name: 'Building Blocks', category: 'blocks', price: 19.99, image: 'https://picsum.photos/seed/toy2/400/300.jpg', description: 'Colorful blocks to enhance creativity and motor skills. 100 pieces in various shapes and sizes.' },
                { id: 3, name: 'Dream Dollhouse', category: 'dolls', price: 34.99, image: 'https://picsum.photos/seed/toy3/400/300.jpg', description: 'A beautiful dollhouse with furniture and accessories. Sparks imagination and storytelling.' },
                { id: 4, name: 'Robot Building Kit', category: 'robots', price: 42.99, image: 'https://picsum.photos/seed/toy4/400/300.jpg', description: 'Build and program your own robot with this STEM kit. A great introduction to coding and engineering.' },
                { id: 5, name: 'Jigsaw Puzzle', category: 'puzzles', price: 12.99, image: 'https://picsum.photos/seed/toy5/400/300.jpg', description: 'A 500-piece jigsaw puzzle featuring a beautiful animal scene. Great for family nights.' },
                { id: 6, name: 'Art & Craft Set', category: 'arts', price: 22.50, image: 'https://picsum.photos/seed/toy6/400/300.jpg', description: 'Everything a young artist needs! Includes paints, brushes, crayons, and paper.' },
            ];

            const categories = [
                { id: 'all', name: 'All Products', icon: 'fas fa-th' },
                { id: 'vehicles', name: 'Vehicles', icon: 'fas fa-car' },
                { id: 'blocks', name: 'Building Blocks', icon: 'fas fa-cube' },
                { id: 'puzzles', name: 'Puzzles', icon: 'fas fa-puzzle-piece' },
                { id: 'robots', name: 'Robots', icon: 'fas fa-robot' },
                { id: 'arts', name: 'Arts & Crafts', icon: 'fas fa-paint-brush' },
            ];

            let cart = JSON.parse(localStorage.getItem('toyoCart')) || [];
            let currentProductForModal = null;

            // --- DOM ELEMENTS ---
            const productGrid = document.getElementById('product-grid');
            const categoryGrid = document.getElementById('category-grid');
            const cartIcon = document.getElementById('cart-icon');
            const cartCount = document.getElementById('cart-count');
            const productModal = document.getElementById('product-modal');
            const cartModal = document.getElementById('cart-modal');
            const toast = document.getElementById('toast');

            // --- INITIALIZATION ---
            function init() {
                renderProducts(products);
                renderCategories();
                updateCartUI();
                setupEventListeners();
            }

            // --- RENDER FUNCTIONS ---
            function renderProducts(productsToRender) {
                productGrid.innerHTML = '';
                productsToRender.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    productCard.dataset.category = product.category;
                    productCard.innerHTML = `
                        <div class="badge">${Math.random() > 0.5 ? 'New' : 'Popular'}</div>
                        <div class="product-image"><img src="${product.image}" alt="${product.name}"></div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p>${product.description.substring(0, 50)}...</p>
                            <div class="product-price">$${product.price.toFixed(2)}</div>
                            <div class="product-actions">
                                <button class="btn btn-primary add-to-cart-btn" data-id="${product.id}">Add to Cart</button>
                                <button class="btn btn-outline view-details-btn" data-id="${product.id}">View Details</button>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(productCard);
                });
            }

            function renderCategories() {
                categoryGrid.innerHTML = '';
                categories.forEach(category => {
                    const categoryCard = document.createElement('div');
                    categoryCard.className = 'category-card';
                    if (category.id === 'all') categoryCard.classList.add('active');
                    categoryCard.dataset.category = category.id;
                    categoryCard.innerHTML = `
                        <i class="${category.icon}"></i>
                        <h3>${category.name}</h3>
                    `;
                    categoryGrid.appendChild(categoryCard);
                });
            }
            
            function updateCartUI() {
                cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);
                localStorage.setItem('toyoCart', JSON.stringify(cart));
            }

            // --- CART FUNCTIONS ---
            function addToCart(productId) {
                const product = products.find(p => p.id === productId);
                const existingItem = cart.find(item => item.id === productId);

                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                updateCartUI();
                showToast(`${product.name} added to cart!`);
            }

            function renderCartItems() {
                const cartItemsContainer = document.getElementById('cart-items');
                const cartTotal = document.getElementById('cart-total');

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="cart-empty-message">Your cart is empty.</p>';
                    cartTotal.textContent = 'Total: $0.00';
                    return;
                }

                cartItemsContainer.innerHTML = '';
                let total = 0;

                cart.forEach(item => {
                    const cartItemEl = document.createElement('div');
                    cartItemEl.className = 'cart-item';
                    cartItemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-details">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="decrease-quantity" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="increase-quantity" data-id="${item.id}">+</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemEl);
                    total += item.price * item.quantity;
                });
                cartTotal.textContent = `Total: $${total.toFixed(2)}`;
            }

            // --- MODAL & UI FUNCTIONS ---
            function showModal(modal) {
                modal.style.display = 'block';
                if (modal === cartModal) renderCartItems();
            }

            function hideModal(modal) {
                modal.style.display = 'none';
            }
            
            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // --- EVENT LISTENERS ---
            function setupEventListeners() {
                // Navigation smooth scroll
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        const targetSection = document.querySelector(targetId);
                        if(targetSection) {
                            targetSection.scrollIntoView({ behavior: 'smooth' });
                            // Update active nav link
                            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                            if(this.classList.contains('nav-link')) this.classList.add('active');
                        }
                    });
                });

                // Product Grid Clicks (using event delegation)
                productGrid.addEventListener('click', (e) => {
                    const target = e.target;
                    if (target.classList.contains('add-to-cart-btn')) {
                        addToCart(parseInt(target.dataset.id));
                    } else if (target.classList.contains('view-details-btn')) {
                        const productId = parseInt(target.dataset.id);
                        currentProductForModal = products.find(p => p.id === productId);
                        document.getElementById('modal-image').src = currentProductForModal.image;
                        document.getElementById('modal-title').textContent = currentProductForModal.name;
                        document.getElementById('modal-price').textContent = `$${currentProductForModal.price.toFixed(2)}`;
                        document.getElementById('modal-description').textContent = currentProductForModal.description;
                        showModal(productModal);
                    }
                });

                // Category Filter Clicks
                categoryGrid.addEventListener('click', (e) => {
                    const card = e.target.closest('.category-card');
                    if (!card) return;
                    
                    document.querySelectorAll('.category-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');

                    const selectedCategory = card.dataset.category;
                    const filteredProducts = selectedCategory === 'all' 
                        ? products 
                        : products.filter(p => p.category === selectedCategory);
                    
                    renderProducts(filteredProducts);
                });

                // Cart Icon Click
                cartIcon.addEventListener('click', () => showModal(cartModal));

                // Modal Close Buttons
                document.querySelectorAll('.modal-close').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        hideModal(e.target.closest('.modal'));
                    });
                });
                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        hideModal(e.target);
                    }
                });

                // Modal "Add to Cart" Button
                document.getElementById('modal-add-to-cart').addEventListener('click', () => {
                    if(currentProductForModal) {
                        addToCart(currentProductForModal.id);
                        hideModal(productModal);
                    }
                });

                // Cart Item Quantity Changes
                document.getElementById('cart-items').addEventListener('click', (e) => {
                    const target = e.target;
                    const productId = parseInt(target.dataset.id);
                    if (!productId) return;

                    const item = cart.find(i => i.id === productId);
                    if (target.classList.contains('increase-quantity')) {
                        item.quantity++;
                    } else if (target.classList.contains('decrease-quantity')) {
                        if (item.quantity > 1) {
                            item.quantity--;
                        } else {
                            cart = cart.filter(i => i.id !== productId);
                        }
                    }
                    updateCartUI();
                    renderCartItems();
                });

                // Clear Cart Button
                document.getElementById('clear-cart').addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear your cart?')) {
                        cart = [];
                        updateCartUI();
                        renderCartItems();
                        showToast('Your cart has been cleared.');
                    }
                });

                // Newsletter Form
                document.getElementById('newsletter-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = e.target.querySelector('input[type="email"]').value;
                    showToast(`Thank you for subscribing with ${email}!`);
                    e.target.reset();
                });
            }

            // --- START THE APP ---
            init();

        });
    </script>

</body>
</html>